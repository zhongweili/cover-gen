# 故障排除指南

## 常见问题解决方案

### 1. API 验证失败 (403 Forbidden)

**问题描述**: 在验证 API Key 时收到 403 错误

**可能原因**:

- API Key 无效或格式错误
- DMX API 账户余额不足
- 浏览器 CORS 安全限制
- API 端点需要特定的请求头

**解决方案**:

#### 方案 1: 跳过验证直接测试

1. 在 API 配置页面点击"跳过验证直接保存"
2. 输入描述并尝试生成图片
3. 如果生成成功，说明 API Key 有效

#### 方案 2: 检查 API Key

1. 登录 [DMX API 控制台](https://www.dmxapi.cn)
2. 确认 API Key 正确复制
3. 检查账户余额是否充足
4. 确认 API Key 权限设置

#### 方案 3: 网络环境检查

1. 尝试使用不同的网络环境
2. 检查是否有防火墙或代理阻止请求
3. 尝试使用 VPN 或其他网络连接

### 2. 特定模型访问失败 (如 OpenAI 模型 403 错误)

**问题描述**: SeedDream 模型工作正常，但 OpenAI 模型返回 403 错误

**可能原因**:

- OpenAI 模型需要特殊权限或更高级别的 API Key
- 账户类型不支持 OpenAI 模型
- 模型 ID 可能已更改或不可用
- 需要额外的费用或订阅

**解决方案**:

1. **使用 SeedDream 3.0 模型** (推荐) - 稳定可用，支持中文
2. **联系 DMX API 支持** 确认 OpenAI 模型的访问权限
3. **检查账户类型** 是否支持高级模型

### 3. 生成图片失败

**问题描述**: API Key 验证通过但生成图片失败

**解决方案**:

1. 检查提示词是否包含敏感内容
2. 尝试使用不同的 AI 模型 (推荐 SeedDream 3.0)
3. 简化提示词描述
4. 检查账户余额

### 4. 网络连接问题

**问题描述**: 无法连接到 DMX API 服务器

**解决方案**:

1. 检查网络连接
2. 尝试刷新页面
3. 清除浏览器缓存
4. 使用不同的浏览器

### 5. TypeScript 错误

**问题描述**: 开发环境中出现 TypeScript 类型错误

**解决方案**:

```bash
# 重新安装依赖
pnpm install

# 清除缓存并重启开发服务器
pnpm dev
```

## 技术限制说明

### CORS 和浏览器安全限制

由于浏览器的安全策略，直接从前端调用某些 API 可能会遇到以下限制：

1. **User-Agent 头部限制**: 浏览器不允许自定义设置 User-Agent 头部
2. **CORS 策略**: 某些 API 服务器可能没有正确配置 CORS 头部
3. **预检请求**: 复杂的 API 请求可能触发 OPTIONS 预检请求

### 推荐的生产环境解决方案

对于生产环境，建议使用以下方案之一：

1. **后端代理**: 创建后端 API 代理服务
2. **Serverless 函数**: 使用 Vercel Functions 或 Netlify Functions
3. **CORS 代理**: 使用公共 CORS 代理服务（仅用于开发测试）

## 联系支持

如果问题仍然存在，请：

1. 检查浏览器控制台的详细错误信息
2. 记录具体的错误步骤
3. 联系 DMX API 技术支持
4. 在项目 GitHub 仓库提交 Issue
